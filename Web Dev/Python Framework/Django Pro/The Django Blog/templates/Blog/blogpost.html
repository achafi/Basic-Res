{% extends 'base.html' %}

{% block title %} Blog{% endblock %}

{% block bactice %} active {% endblock %}

{% block body %}
<div class="container my-3">
  <div class="card text-center">
    <div class="card-header">
      {{post.title}}
    </div>
    <div class="card-body">
      <h5 class="card-title">{{post.author}}</h5>
      <p class="card-text">{{post.content}}</p>
      <a href="/blog/" class="btn btn-primary">Go back</a>
    </div>
  </div>
</div>
<div class="container">
  <h2>Comments {{comments.count}}</h2>
  <div class="row my-3">
    <div class="my2">
      {% if user.is_authenticated %}
      <form action="/blog/blogcomments" method="post">
        {% csrf_token %}
        <input type="text" name="comment" placeholder="Comment here">
        <input type="hidden" name="postsno" value="{{post.sno}}">
        <input type="submit" value="Submit">
      </form>
      {% else %}
      <h6>log in to post comment</h6>
      {% endif %}
    </div>
    <div class="container my-3">
      {% for comment in comments %}
      <div class="col md-2">{{comment.user.username}} <b>{{comment.comment}}</b></div>
      <div class="reply mx-0">
          <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#reply{{comment.sno}}" aria-expanded="false" aria-controls="reply{{comment.sno}}">
            Reply
          </button>
        <div class="collapse" id="reply{{comment.sno}}">
          <div class="card card-body">
            <form action="/blog/blogcomments" method="post">
              <input type="text" name="comment" placeholder="Reply">
              <input type="hidden" name="postsno" value="{{post.sno}}">
              <input type="submit" value="Submit">
            </form>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</div>
{% endblock %}